!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("isomorphic-unfetch")):"function"==typeof define&&define.amd?define(["isomorphic-unfetch"],t):(e=e||self).cep=t(e.fetch)}(this,function(n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function s(e,t,r){return(s=i()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&c(o,r.prototype),o}).apply(null,arguments)}function t(e){var n="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return s(e,arguments,o(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(r){var n=i();return function(){var e,t=o(r);return u(this,n?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function p(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var h=function(){e(i,t(Error));var c=f(i);function i(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.message,n=t.type,o=t.errors;return a(this,i),(e=c.call(this)).name="CepPromiseError",e.message=r,e.type=n,e.errors=o,e}return i}(),m=function(){e(c,t(Error));var o=f(c);function c(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.message,n=t.service;return a(this,c),(e=o.call(this)).name="ServiceError",e.message=r,e.service=n,e}return c}();function d(e){var t="".concat(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"","https://apps.correios.com.br/SigepMasterJPA/AtendeClienteService/AtendeCliente"),r={method:"POST",body:'<?xml version="1.0"?>\n<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cli="http://cliente.bean.master.sigep.bsb.correios.com.br/">\n  <soapenv:Header />\n  <soapenv:Body>\n    <cli:consultaCEP>\n      <cep>'.concat(e,"</cep>\n    </cli:consultaCEP>\n  </soapenv:Body>\n</soapenv:Envelope>"),headers:{"Content-Type":"text/xml;charset=UTF-8","cache-control":"no-cache"}};return n(t,r).then(v).catch(E)}function v(e){return e.ok?e.text().then(y).then(w):e.text().then(g).then(b)}function y(e){try{var t;return(null!==(t=e.replace(/\r?\n|\r/g,"").match(/<return>(.*)<\/return>/)[0])&&void 0!==t?t:"").replace("<return>","").replace("</return>","").split(/</).reduce(function(e,t){var r=t.split(">");return 1<r.length&&r[1].length&&(e[r[0]]=r[1]),e},{})}catch(e){throw new Error("Não foi possível interpretar o XML de resposta.")}}function g(e){try{var t;return(null!==(t=e.match(/<faultstring>(.*)<\/faultstring>/)[0])&&void 0!==t?t:"").replace("<faultstring>","").replace("</faultstring>","")}catch(e){throw new Error("Não foi possível interpretar o XML de resposta.")}}function b(e){throw new Error(e)}function w(e){return{cep:e.cep,state:e.uf,city:e.cidade,neighborhood:e.bairro,street:e.end}}function E(e){var t=new m({message:e.message,service:"correios"});throw"FetchError"===e.name&&(t.message="Erro ao se conectar com o serviço dos Correios."),t}function P(e){if(e.ok)return e.json();throw Error("Erro ao se conectar com o serviço ViaCEP.")}function S(e){if(!0===e.erro)throw new Error("CEP não encontrado na base do ViaCEP.");return e}function j(e){return{cep:e.cep.replace("-",""),state:e.uf,city:e.localidade,neighborhood:e.bairro,street:e.logradouro}}function C(e){var t=new m({message:e.message,service:"viacep"});throw"FetchError"===e.name&&(t.message="Erro ao se conectar com o serviço ViaCEP."),t}function O(e){if(e.ok)return e.json();throw Error("Erro ao se conectar com o serviço WideNet.")}function x(e){if(!1===e.ok||200!==e.status)throw new Error("CEP não encontrado na base do WideNet.");return e}function _(e){return{cep:e.code.replace("-",""),state:e.state,city:e.city,neighborhood:e.district,street:e.address}}function A(e){var t=new m({message:e.message,service:"widenet"});throw"FetchError"===e.name&&(t.message="Erro ao se conectar com o serviço WideNet."),t}function T(r){return new Promise(function(e,t){return Promise.resolve(r).then(t,e)})}var R,F="undefined"!=typeof window?(R=d,function(e){return R(e,"https://proxier.now.sh/api?url=")}):d,M=function(e){var t="".concat(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"","https://viacep.com.br/ws/").concat(e,"/json/");return n(t,{method:"GET",mode:"cors",headers:{"content-type":"application/json;charset=utf-8"}}).then(P).then(S).then(j).catch(C)},N=function(e){var t="".concat(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"","https://cep.widenet.host/busca-cep/api/cep/").concat(e,".json");return n(t,{method:"GET",mode:"cors",headers:{"content-type":"application/json;charset=utf-8"}}).then(O).then(x).then(_).catch(A)};Promise.any=function(e){return T(Promise.all(p(e).map(T)))};var k=Promise,V=8;function D(e){var t=r(e);if("number"===t||"string"===t)return e;throw new h({message:"Erro ao inicializar a instância do CepPromise.",type:"validation_error",errors:[{message:"Você deve chamar o construtor utilizando uma String ou um Number.",service:"cep_validation"}]})}function I(e){return e.toString().replace(/\D+/g,"")}function W(e){return"0".repeat(V-e.length)+e}function q(e){if(e.length<=V)return e;throw new h({message:"CEP deve conter exatamente ".concat(V," caracteres."),type:"validation_error",errors:[{message:"CEP informado possui mais do que ".concat(V," caracteres."),service:"cep_validation"}]})}function z(e){return k.any([N(e),F(e),M(e)])}function B(e){if(void 0!==e.length)throw new h({message:"Todos os serviços de CEP retornaram erro.",type:"service_error",errors:e});throw e}function G(e){var t=e.message,r=e.type,n=e.errors;throw new h({message:t,type:r,errors:n})}return function(e){return k.resolve(e).then(D).then(I).then(q).then(W).then(z).catch(B).catch(G)}});